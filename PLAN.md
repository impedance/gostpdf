# План разработки MVP Markdown → PDF

## Состояние на сегодня
- Репозиторий на `master`, шаблон PDF (`templates/gost-template.pdf`) хранится в Git.
- Требование по окружению: работаем только из активированного Python venv (3.11+), зависимости устанавливаем в него.
- Готовы и покрыты тестами: `walker.py`, `images.py`, `bundle.py`, `config.py`, `pandoc_runner.py`, `reporting.py`, `pipeline.py` (валидация параметров, сбор markdown, сборка/запись бандла, вызов Pandoc, агрегация предупреждений), `cli.py`; есть интеграционный тест пайплайна. Базовый `mypy` настроен (`walker` в strict).
- Локальные проверки: `ruff format .`, `ruff check .`, `mypy .`, `python -m pytest` — проходят в активированном `.venv`.

## Параллельные задачи (можно стартовать сразу)
- Нет открытых параллельных задач.

## Последовательные/блокирующие шаги
- Финал MVP: прогнать `ruff check . && ruff format . && mypy . && pytest`, опционально реальный рендер, обновление DoD и отчёт.

## Общие правила по задачам
- После завершения каждой задачи прогонять `ruff check .`, `ruff format .`, `pytest` (или эквивалентные проверки), фиксировать результат.
- Обновлять Definition of Done для задачи сразу по итогам выполнения.

## Прогресс (чекбоксы)
- [x] Walker и структура (`walker.py`, фикстуры, тесты)
- [x] Резолв картинок (`images.py`, переписывание ссылок, тесты)
- [x] Сборка бандла (базовая версия, без метаданных из config/CLI)
- [x] Конфиг (`config.py`, валидация, тесты)
- [x] T1: Бандл — метаданные/запись/переписывание через images
  [x] T2: Pandoc runner (`pandoc_runner.py`, мок-тесты, смоук рендер)
- [x] T3: Пайплайн (оркестратор, мерж override, запись bundle, вызов runner)
  - [x] Подзадача 1: Валидация/мердж параметров
  - [x] Обвязка walker (сбор Markdown и предупреждений)
  - [x] Обвязка bundle (сбор и запись бандла)
  - [x] Обвязка pandoc_runner (вызов рендера PDF)
  - [x] Агрегация результатов/предупреждений
- [x] T4: CLI (аргументы, вывод warnings, коды выхода)
- [x] T5: Reporting helper (форматирование предупреждений)
- [x] T6: Интеграция/фикстуры (pipeline fixture + интеграционный тест)
- [ ] Финальный прогон линтов/тестов, DoD, опционально реальный рендер
- [x] Статическая типизация (базовый mypy, строгие секции точечно)
