# Присвоение группы нераспределенным узлам

Модуль RCC_default_group предназначен для присвоения заданной группы нераспределенным узлам на сервере РОСА Центр Управления.

Принцип работы модуля состоит в добавлении или удалении из расписания планировщика cron скрипта распределения узлов в зависимости от бинарного параметра enable_default_hostgroup.

Скрипт в модуле представлен в виде erb-шаблона с возможностью переопределения имени группы.

Управление в скрипте реализовано с помощью утилиты командной строки hammer от имени администратора.

**Следует обратить внимание**, что для правильной работы необходимо наличие корректно заполненного файла /root/.hammer/cli.modules.d/foreman.yml следующего вида:

```bash Terminal
:foreman:
Credentials. You'll be asked for them interactively if you leave them blank here
:username: 'admin'
:password: '<пароль пользователя admin>'
```

Данный файл создается автоматически при установке Комплекса, но требует внесения изменений при последующей смене пароля пользователя admin.

Для автоматического распределения в группу по умолчанию необходимо назначить модуль RCC_default_group на группу "Rosa Control Center Server" в меню "Настройка → Группы узлов". После выполнения Puppet-агента создается расписание cron для скрипта, который назначает группу по умолчанию для всех узлов без назначенной группы.

Параметры модуля приведены в таблице 1.

::app-collapsible
---
label: "Таблица 1 - Параметры модуля RCC_default_group"
---

#content
<table border="1" cellspacing="0" cellpadding="4">
  <thead>
    <tr>
      <th>Имя</th>
      <th>Тип</th>
      <th>Значение по умолчанию</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enable_default_group</td>
      <td>Boolean</td>
      <td>true</td>
      <td>true – включение автоматического присвоения группы<br>false – выключение автоматического присвоения группы</td>
    </tr>
    <tr>
      <td>default_group_name</td>
      <td>String</td>
      <td>Default</td>
      <td>Имя группы для автоматического присвоения нераспределенным узлам</td>
    </tr>
  </tbody>
</table>
::