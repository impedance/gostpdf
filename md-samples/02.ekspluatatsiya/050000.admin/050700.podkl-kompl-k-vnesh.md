# Подключение Комплекса к внешней системе виртуализации

Интеграция Комплекса с внешней системой виртуализации (ROSA Virtualization, VMware) позволяет в процессе развертывания новых узлов создавать ВМ напрямую через веб-интерфейс РОСА Центр Управления.

> Примечание – Для обеспечения внешней интеграции и обмена информацией серверу РОСА Центр Управления должны быть доступны конечные точки API используемой системы виртуализации (ROSA Virtualization, VMware).

Для настройки подключения к внешней системе виртуализации надо перейти в меню "Инфраструктура → Вычислительные ресурсы" панели навигации и нажать кнопку `Создать вычислительный ресурс`.

На экране появится интерфейс настройки, в котором параметры подключения распределены по вкладкам (рисунок 16).

::sign-image
---
src: /image23.png
sign: Рисунок 16 — Параметры подключения системы виртуализации
---
::

Во вкладке "Вычислительный ресурс" интерфейса настройки указывают необходимые значения для следующих параметров подключения:

- Имя – наименование подключаемой системы виртуализации;
- Сервис – платформа виртуализации (EC2, Libvirt, Openstack, VMware и Ovirt). В случае подключения к системе виртуализации ROSA Virtualization необходимо указать значение oVirt;
- Описание – краткое описание подключаемой системы виртуализации.

Далее в зависимости от выбранной системы виртуализации задать значения параметров:

- EC2:
  - HTTP прокси – прокси сервер для подключения к серверам поставщика;
  - Ключ доступа – публичный ключ SHH для доступа;
  - Секретный ключ – приватный ключ SSH для доступа;
  - Gov Cloud – использование в рамках правительственных сетей (не применяется);
  - Регион – выбор региона;
- Libvirt:
  - URL – сетевой адрес конечных точек API подключаемой системы виртуализации (например, https://virt.rosa.int/libvirt-engine/api);
  - Тип отображения – выбор типа отображаемого дисплея по умолчанию;
  - Пароли консоли – включение случайного пароля для консоли;
- Openstack:
  - URL – сетевой адрес конечных точек API подключаемой системы виртуализации (например, https://virt.rosa.int/openstack-engine/api);
  - Пользователь – имя пользователя, имеющего права на управление ВМ, с указанием источника аутентификации (например, controlcenter@internal);
  - Пароль – пароль пользователя.
  - Название проекта (арендатора) – имя проекта (V3) или имя арендатора (V2) из CLI или файла RC;
  - Домен пользователя – значение домена пользователя из CLI или файла RC (только для типа авторизации V3);
  - Имя домена проекта – значение доменного имени проекта из CLI или файла RC (только для типа авторизации V3);
  - ID домена проекта – значение ID домена проекта из CLI или файла RC (только для типа авторизации V3);
  - Разрешить использование внешней сети в качестве главной сети – разрешает включение внешней сети провайдера в качестве основной сети Openstack;
- VMware:
  - VCenter/Сервер – выбор сервера для подключения;
  - Пользователь – имя пользователя, имеющего права на управление ВМ, с указанием источника аутентификации (например, controlcenter@internal);
  - Пароль – пароль пользователя;
  - Центр данных – выбор ЦОД для сеанса;
  - Отпечаток – уникальный отпечаток сертификата VWware;
  - Тип отображения – выбор типа отображаемого дисплея по умолчанию;
  - Включить кэширование –  включение кэширования вызовов провайдера VWware;
  - Пароли для консоли VNC – включение случайного пароля для консоли;
- oVirt:
  - URL – сетевой адрес конечных точек API подключаемой системы виртуализации (например, https://virt.rosa.int/ovirt-engine/api);
  - Пользователь – имя пользователя, имеющего права на управление ВМ, с указанием источника аутентификации (например, controlcenter@internal);
  - Пароль – пароль пользователя.
  - Центр данных – выбор ЦОД для сеанса Ovirt;
  - ID квоты – выбор установленной квоты провайдера Ovirt;
  - Тип отображения по умолчанию – выбор типа отображаемого дисплея по умолчанию;
  - Клавиатура VNC по умолчанию – выбор клавиатуры по умолчанию для сеанса VNC;
  - Сертификация Х509 –  указывается центр сертификации или цепочка центров сертификации (оставляется пустым для автоматического заполнения).

Вкладки "Местоположения" и "Организации" содержат параметры, которые позволяют ограничить подключение системы виртуализации только указанными местоположениями и организациями (например, отдельными подразделениями и филиалами) в структуре предприятия.

После завершения настройки параметров подключения системы виртуализации нужно нажать кнопку `Применить`.