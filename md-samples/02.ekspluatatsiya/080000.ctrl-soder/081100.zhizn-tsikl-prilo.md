# Жизненный цикл приложений

## Окружения жизненного цикла

Жизненный цикл приложений — это концепция, занимающая центральное место в функциях управления содержимым РОСА Центр Управления. Жизненный цикл приложения определяет, как конкретная ОС и ее программное обеспечение выглядят на определенном этапе.

Например, жизненный цикл приложения может быть простым: только стадия разработки и стадия производства.

Более сложный жизненный цикл приложения может состоять из дополнительных этапов, таких как этап тестирования или бета-версия. Это добавляет дополнительные этапы к жизненному циклу приложения:

- развитие;
- тестирование;
- бета-версия;
- производство.

РОСА Центр Управления предоставляет методы для настройки каждого этапа жизненного цикла приложения в соответствии с требуемыми спецификациями.

Каждый этап жизненного цикла приложения в Комплексе называется окружением. В каждом окружении используется определенный набор содержимого. Комплекс определяет эти коллекции содержимого как представление содержимого. Каждое представление содержимого действует как фильтр, в котором можно определить, какие репозитории и пакеты следует включить в определенное окружение. Это позволяет определить определенные наборы содержимого для каждого окружения.

Например, для почтового сервера может потребоваться только простой жизненный цикл приложения, в котором есть сервер производственного уровня для реального использования и тестовый сервер для опробования новейших пакетов почтового сервера. Когда тестовый сервер пройдет начальную фазу, можно настроить сервер производственного уровня для использования новых пакетов.

Другой пример — жизненный цикл разработки программного продукта. Чтобы разработать новое программное обеспечение в окружении разработки, нужно протестировать его в окружении контроля качества, предварительно выпустив его в виде бета-версии, а затем выпустить ПО в качестве приложения производственного уровня.

Для создания окружения жизненного цикла следует перейти в меню "Содержимое → Жизненный цикл → Окружения жизненного цикла" и нажать кнопку `Create Environment Path (Создать окружение)`.

Для нового окружения нужно ввести параметры в поля (рисунок 122):

- Название – имя окружения;
- Метка – генерируется автоматически в зависимости от содержания "Названия";
- Описание – описания окружения.

Нажать кнопку `Сохранить`.

::sign-image
---
src: /image132.png
sign: Рисунок 122 — Создание окружения
---
::

## Представления

РОСА Центр Управления использует представления содержимого, чтобы предоставить узлам доступ к специально подобранному подмножеству содержимого. Для этого необходимо определить, какие репозитории требуется использовать, а затем применить к содержимому определенные фильтры.

Общая схема создания представлений содержимого для фильтрации и создания снимков выглядит следующим образом:

1. создать представление содержимого;
2. добавить один или несколько репозиториев, необходимые в представлении содержимого;
3. (необязательно) создать один или несколько фильтров для уточнения содержимого представления содержимого;
4. (необязательно) устранить все зависимости пакетов для представления содержимого;
5. опубликовать представление содержимого;
6. (необязательно) привязать представление содержимого в другое окружение.
7. присоединить узел содержимого к представлению содержимого.

Если репозиторий не связан с представлением содержимого, данные не будут переданы, и ОС, зарегистрированные в нем, не смогут получать обновления.

Узел может быть связан только с одним представлением содержимого. Чтобы связать узел с несколькими представлениями содержимого, необходимо создать составное представление содержимого.

Представление содержимого — это специально подобранное подмножество содержимого, к которому могут получить доступ узлы. Создав представление содержимого, можно определить версии программного обеспечения, используемые конкретным окружением или сервером Smart Proxy.

Каждое представление содержимого имеет набор репозиториев в каждом окружении. Сервер Комплекса хранит эти репозитории и управляет ими. Например, можно создать представления содержимого следующими способами:

- представление содержимого со старыми версиями пакетов для рабочего окружения и другое представление содержимого с более новыми версиями пакетов для окружения разработки;
- представление содержимого с репозиторием пакетов, необходимым для ОС, и другое представление содержимого с репозиторием пакетов, необходимым для приложения;
- составное представление содержимого для модульного подхода к управлению представлениями содержимого, т.е. использовать одно представление для управления ОС и другое для управления приложением. При создании составного представления содержимого, объединяющего оба представления содержимого, создается новый репозиторий, объединяющий репозитории из каждого представления содержимого. Тем не менее, репозитории для представлений содержимого по-прежнему существуют, и ими можно управлять отдельно.

Представление Организации по умолчанию — это управляемое приложением представление содержимого для всего содержимого, синхронизированного с Комплексом. Возможно зарегистрировать узел в окружении Library в Комплексе, чтобы использовать представление Организации по умолчанию без настройки представлений содержимого и окружений жизненного цикла.

Продвижение представления содержимого в разных окружениях позволяет при преобразовании представления содержимого из одного окружения среды в следующее окружение в жизненном цикле приложения Комплекса обновлять репозиторий и публиковать пакеты.

Для создания представления окружения необходимо перейти в меню панели навигации ""Содержимое → Жизненный цикл → Представления" и нажать кнопку `Создать представление содержимого`.

В появившемся модальном окне для нового представления нужно задать параметры в полях (рисунок 123):

- Имя – имя окружения;
- Метка – генерируется автоматически в зависимости от содержания "Названия";
- Описание – описания окружения;
- Тип – выбрать представление содержимого или представление составного содержимого;
- (необязательно) если требуется автоматически разрешать зависимости при каждой публикации этого представления содержимого, нужно установить параметр "Решить зависимости";

> Примечание – Решение зависимостей замедляет время публикации и может игнорировать все используемые фильтры представления содержимого. Это также может привести к ошибкам при разрешении зависимостей для исправлений.

Нажать кнопку `Создать представление содержимого`.

::sign-image
---
src: /image133.png
sign: Рисунок 123 — Создание представления содержимого
---
::

После создания представления можно перейти к заданию публикации версий, репозиториев и фильтров.

В списке представлений в меню панели навигации "Жизненный цикл → Представления" нажать на имя представления (рисунок 124).

::sign-image
---
src: /image134.png
sign: Рисунок 124 — Просмотр представления содержимого
---
::

На вкладке "Сведения" приведены параметры представления, которые можно редактировать нажатием на пиктограмму (карандаш).

На вкладке "Версия" по кнопке `Опубликовать новую версию` задают публикацию и продвижение версии представления по шагам, используя кнопки `Back` и `Next`. Для публикации нажать `Finish`.

На вкладке "Репозитории" подключают пользовательские репозитории или репозитории Red Hat.

На вкладке "Фильтры" создаются фильтры нажатием на кнопку `Создать фильтр`.

В появившемся модальном окне (рисунок 125) нужно задать параметры фильтра в соответствующих полях:

- имя фильтра;
- тип содержимого;
- тип включения: исключить или включить;
- описание фильтра.

Нажать кнопку `Создать фильтр`.

После создания фильтра дополнительно необходимо задать правила фильтра в зависимости от выбранного типа содержимого при помощи кнопки `Добавить правило RPM`.

::sign-image
---
src: /image136.png
sign:  Рисунок 125 — Создание фильтра
---
::

На вкладке "Журнал" отображаются данные об истории публикации или продвижения представления окружения.